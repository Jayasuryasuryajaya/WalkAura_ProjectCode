import{r as t,e as V,u as ue,y as se,j as O,L as me,a as he}from"./index-CZ9p6afL.js";import{i as pe}from"./icon-BvqI3lih.js";import{u as fe,c as ve,a as ge}from"./formik.esm-TAbcQ__l.js";function F(){return(F=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(e[f]=a[f])}return e}).apply(this,arguments)}function de(e,l){(l==null||l>e.length)&&(l=e.length);for(var a=0,f=new Array(l);a<l;a++)f[a]=e[a];return f}var ie=window;t.memo(function(e){var l=e.state,a=l===void 0?"":l,f=e.client_id,w=e.className,b=e.redirect_uri,g=e.scope,k=g===void 0?"profile":g,I=e.isOnlyGetToken,_=I!==void 0&&I,L=e.scope_data,N=L===void 0?{profile:{essential:!0}}:L,E=e.response_type,P=E===void 0?"token":E,C=e.children,s=e.onReject,u=e.onResolve,c=e.onLoginStart,m=t.useRef(null),p=t.useState(!1),T=p[0],j=p[1];t.useEffect(function(){!T&&r()},[T]),t.useEffect(function(){return function(){m.current&&m.current.remove()}},[]);var y=t.useCallback(function(){return!!document.getElementById("amazon-login")},[]),d=t.useCallback(function(h,S,H,q,x){S===void 0&&(S="script");var R=h.createElement(S);R.id=H,R.src=q,R.async=!0,R.defer=!0;var z=document.getElementsByTagName("script")[0];m.current=R,z&&z.parentNode&&z.parentNode.insertBefore(R,z),R.onload=x},[]),i=t.useCallback(function(h){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+h.access_token}}).then(function(S){return S.json()}).then(function(S){u({provider:"amazon",data:F({},S,h)})}).catch(function(S){s(S)}).finally(function(){}),Promise.resolve()}catch(S){return Promise.reject(S)}},[s,u]),n=t.useCallback(function(h){_?u({provider:"amazon",data:F({},h)}):i(h)},[i,u,_]),o=t.useCallback(function(h){s(h)},[s]),r=t.useCallback(function(){y()?j(!0):d(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){ie.amazon.Login.setClientId(f),j(!0)})},[y,f,d]),v=t.useCallback(function(){T&&(ie.amazon?(c&&c(),ie.amazon.Login.authorize({scope:k,scope_data:N,response_type:P,redirect_uri:b,state:a},function(h){h.error?o(h.error):n(h)})):(r(),s("Google SDK isn't loaded!")))},[r,k,a,s,N,T,o,c,b,P,n]);return V.createElement("div",{className:w,onClick:v},C)});var ae=window;t.memo(function(e){var l=e.appId,a=e.scope,f=a===void 0?"email,public_profile":a,w=e.state,b=w===void 0||w,g=e.xfbml,k=g===void 0||g,I=e.cookie,_=I===void 0||I,L=e.version,N=L===void 0?"v2.7":L,E=e.language,P=E===void 0?"en_EN":E,C=e.auth_type,s=C===void 0?"":C,u=e.className,c=e.onLoginStart,m=e.onReject,p=e.onResolve,T=e.redirect_uri,j=e.fieldsProfile,y=j===void 0?"id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender":j,d=e.response_type,i=d===void 0?"code":d,n=e.return_scopes,o=n===void 0||n,r=e.isOnlyGetToken,v=r!==void 0&&r,h=e.children,S=t.useRef(null),H=t.useState(!1),q=H[0],x=H[1],R=t.useState(!1),z=R[0],A=R[1];t.useEffect(function(){!q&&X()},[q]),t.useEffect(function(){return function(){S.current&&S.current.remove()}},[]);var B=t.useCallback(function(U,K){var W=U.createElement("script");W.id="facebook-jssdk",W.src="https://connect.facebook.net/en_EN/sdk.js";var G=U.getElementsByTagName("script")[0];G&&G.parentNode&&G.parentNode.insertBefore(W,G),K()},[]),Y=t.useCallback(function(){return!!document.getElementById("facebook-jssdk")},[]),$=t.useCallback(function(U,K){var W=window;W.fbAsyncInit=function(){W.FB&&W.FB.init(F({},U)),x(!0);var G=K.getElementById("fb-root");G||((G=K.createElement("div")).id="fb-root",K.body.appendChild(G)),S.current=G}},[]),ee=t.useCallback(function(U){ae.FB.api("/me",{locale:P,fields:y},function(K){p({provider:"facebook",data:F({},U,K)})})},[y,P,p]),te=t.useCallback(function(U){console.log("ðŸš€ ~ file: index.tsx:127 ~ response:",U),U.authResponse?v?p({provider:"facebook",data:F({},U.authResponse)}):ee(U.authResponse):m(U),A(!1)},[ee,v,m,p]),X=t.useCallback(function(){Y()?x(!0):B(document,function(){$({appId:l,xfbml:k,version:N,state:b,cookie:_,redirect_uri:T,response_type:i},document)})},[b,l,k,_,N,$,T,i,B,Y]),Z=t.useCallback(function(){q&&!z&&(ae.FB?(A(!0),c&&c(),ae.FB.login(te,{scope:f,return_scopes:o,auth_type:s})):(X(),m("Fb isn't loaded!"),A(!1)))},[X,f,m,s,q,c,z,o,te]);return V.createElement("div",{className:u,onClick:Z},h)});var M="875c0462-6309-4ddf-9889-5227b1acc82c",ne=window,we=t.memo(function(e){var l=e.client_id,a=e.scope,f=a===void 0?"https://www.googleapis.com/auth/userinfo.profile":a,w=e.prompt,b=w===void 0?"select_account":w,g=e.typeResponse,k=g===void 0?"accessToken":g,I=e.ux_mode,_=e.className,L=_===void 0?"":_,N=e.login_hint,E=N===void 0?"":N,P=e.access_type,C=P===void 0?"online":P,s=e.onLoginStart,u=e.onReject,c=e.onResolve,m=e.redirect_uri,p=m===void 0?"/":m,T=e.auto_select,j=T!==void 0&&T,y=e.isOnlyGetToken,d=y!==void 0&&y,i=e.cookie_policy,n=i===void 0?"single_host_origin":i,o=e.hosted_domain,r=o===void 0?"":o,v=e.discoveryDocs,h=v===void 0?"":v,S=e.children,H=e.fetch_basic_profile,q=H===void 0||H,x=t.useRef(null),R=t.useState(!1),z=R[0],A=R[1],B=t.useState(null),Y=B[0],$=B[1];t.useEffect(function(){!z&&K()},[z]),t.useEffect(function(){return function(){x.current&&x.current.remove()}},[]);var ee=t.useCallback(function(){return!!document.getElementById("google-login")},[]),te=t.useCallback(function(G,J,D,oe,le){J===void 0&&(J="script");var Q=G.createElement(J);Q.id=D,Q.src=oe,Q.async=!0,Q.defer=!0;var re=document.getElementsByTagName("script")[0];x.current=Q,re&&re.parentNode&&re.parentNode.insertBefore(Q,re),Q.onload=le},[]),X=t.useCallback(function(G){if(k==="accessToken"){var J=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M,Authorization:"Bearer "+G.access_token});fetch("https://cors.bridged.cc/https://www.googleapis.com/oauth2/v3/userinfo?alt=json",{method:"GET",headers:J}).then(function(D){return D.json()}).then(function(D){var oe=F({},G,D);c({provider:"google",data:oe})}).catch(function(D){u(D)})}else fetch("https://www.googleapis.com/oauth2/v3/tokeninfo?id_token="+G.credential,{method:"GET"}).then(function(D){return D.json()}).then(function(D){var oe=F({},G,D);c({provider:"google",data:oe})}).catch(function(D){u(D)})},[k,u,c]),Z=t.useCallback(function(G){G&&C==="offline"||d?c({provider:"google",data:G}):X(G)},[C,d,X,c]),U=t.useCallback(function(G){u({provider:"google",data:G})},[u]),K=t.useCallback(function(){ee()?A(!0):te(document,"script","google-login","https://accounts.google.com/gsi/client",function(){var G={client_id:l,ux_mode:I},J=null;if(k==="idToken")ne.google.accounts.id.initialize(F({},G,{auto_select:j,prompt:"select_account",login_uri:p,callback:Z,native_callback:Z,error_callback:U}));else{var D=F({},G,{scope:f,prompt:b,login_hint:E,access_type:C,hosted_domain:r,redirect_uri:p,cookie_policy:n,discoveryDocs:h,immediate:!0,fetch_basic_profile:q,callback:Z,error_callback:U});J=C==="offline"?ne.google.accounts.oauth2.initCodeClient(D):ne.google.accounts.oauth2.initTokenClient(D)}J&&$(J),A(!0)})},[f,b,I,l,E,j,C,p,k,h,n,r,Z,U,q,te,ee]),W=t.useCallback(function(){z&&(ne.google?(s&&s(),Y?C==="offline"?Y.requestCode():Y.requestAccessToken():ne.google.accounts.id.prompt()):(K(),u("Google SDK isn't loaded!")))},[C,Y,z,K,s,u]);return V.createElement("div",{className:L,onClick:W},S)});t.memo(function(e){var l=e.state,a=l===void 0?"":l,f=e.scope,w=f===void 0?"repo,gist":f,b=e.client_id,g=e.client_secret,k=e.className,I=k===void 0?"":k,_=e.redirect_uri,L=e.allow_signup,N=L!==void 0&&L,E=e.isOnlyGetToken,P=E!==void 0&&E,C=e.isOnlyGetCode,s=C!==void 0&&C,u=e.children,c=e.onReject,m=e.onResolve,p=e.onLoginStart;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_github")&&o&&(localStorage.setItem("github",o),window.close())},[]);var T=t.useCallback(function(n){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+n.access_token,"x-cors-grida-api-key":M}}).then(function(o){return o.json()}).then(function(o){m({provider:"github",data:F({},o,n)})}).catch(function(o){c(o)})},[c,m]),j=t.useCallback(function(n){if(s)m({provider:"github",data:{code:n}});else{var o={code:n,state:a,redirect_uri:_,client_id:b,client_secret:g},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(v){return v.text()}).then(function(v){for(var h,S={},H=function(x,R){var z;if(typeof Symbol>"u"||x[Symbol.iterator]==null){if(Array.isArray(x)||(z=function(B,Y){if(B){if(typeof B=="string")return de(B,void 0);var $=Object.prototype.toString.call(B).slice(8,-1);return $==="Object"&&B.constructor&&($=B.constructor.name),$==="Map"||$==="Set"?Array.from(B):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?de(B,void 0):void 0}}(x))){z&&(x=z);var A=0;return function(){return A>=x.length?{done:!0}:{done:!1,value:x[A++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(z=x[Symbol.iterator]()).next.bind(z)}(new URLSearchParams(v));!(h=H()).done;){var q=h.value;S[q[0]]=q[1]}S.access_token?P?m({provider:"github",data:S}):T(S):c("no data")}).catch(function(v){c(v)})}},[a,c,T,m,b,_,g,s,P]),y=t.useCallback(function(n){var o=n.type,r=n.code,v=n.provider;try{return Promise.resolve(o==="code"&&v==="github"&&r&&j(r))}catch(h){return Promise.reject(h)}},[j]),d=t.useCallback(function(){window.removeEventListener("storage",d,!1);var n=localStorage.getItem("github");n&&(y({provider:"github",type:"code",code:n}),localStorage.removeItem("github"))},[y]),i=t.useCallback(function(){p&&p(),window.addEventListener("storage",d,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+b+"&scope="+w+"&state="+a+"_github&redirect_uri="+_+"&allow_signup="+N,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[w,a,b,_,N,p,d]);return V.createElement("div",{className:I,onClick:i},u)});t.memo(function(e){var l=e.state,a=l===void 0?"":l,f=e.client_id,w=e.client_secret,b=e.className,g=e.redirect_uri,k=e.fields,I=k===void 0?"id,username,account_type,media_count":k,_=e.scope,L=_===void 0?"user_profile,user_media":_,N=e.response_type,E=N===void 0?"code":N,P=e.isOnlyGetCode,C=P!==void 0&&P,s=e.isOnlyGetToken,u=s!==void 0&&s,c=e.children,m=e.onReject,p=e.onResolve,T=e.onLoginStart;t.useEffect(function(){var o=new URL(window.location.href),r=o.searchParams.get("code"),v=o.searchParams.get("state");v!=null&&v.includes("_instagram")&&r&&(localStorage.setItem("instagram",r),window.close())},[]);var j=t.useCallback(function(o){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields="+I+"&access_token="+o.access_token,{method:"GET",headers:{"x-cors-grida-api-key":M}}).then(function(r){return r.json()}).then(function(r){p({provider:"instagram",data:F({},r,o)})}).catch(function(r){m(r)})},[I,m,p]),y=t.useCallback(function(o){if(C)p({provider:"instagram",data:{code:o}});else{var r={grant_type:"authorization_code",code:o,redirect_uri:g,client_id:f,client_secret:w},v=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:v,body:new URLSearchParams(r)}).then(function(h){return h.json()}).then(function(h){h.access_token?u?p({provider:"instagram",data:h}):j(h):m("no data")}).catch(function(h){m(h)}).finally(function(){})}},[m,p,j,f,g,w,C,u]),d=t.useCallback(function(o){var r=o.type,v=o.code,h=o.provider;try{return Promise.resolve(r==="code"&&h==="instagram"&&v&&y(v))}catch(S){return Promise.reject(S)}},[y]),i=t.useCallback(function(){window.removeEventListener("storage",i,!1);var o=localStorage.getItem("instagram");o&&(d({provider:"instagram",type:"code",code:o}),localStorage.removeItem("instagram"))},[d]),n=t.useCallback(function(){T&&T(),window.addEventListener("storage",i,!1);var o=window.screen.width/2-225,r=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+E+"&client_id="+f+"&scope="+L+"&state="+a+"_instagram&redirect_uri="+g,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+r+", left="+o)},[L,a,f,g,T,E,i]);return V.createElement("div",{className:b,onClick:n},c)});t.memo(function(e){var l=e.tenant,a=l===void 0?"common":l,f=e.state,w=f===void 0?"":f,b=e.client_id,g=e.className,k=e.redirect_uri,I=e.scope,_=I===void 0?"profile openid email":I,L=e.response_type,N=L===void 0?"code":L,E=e.response_mode,P=E===void 0?"query":E,C=e.children,s=e.code_challenge,u=s===void 0?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":s,c=e.code_challenge_method,m=c===void 0?"plain":c,p=e.prompt,T=p===void 0?"select_account":p,j=e.isOnlyGetCode,y=j!==void 0&&j,d=e.isOnlyGetToken,i=d!==void 0&&d,n=e.onLoginStart,o=e.onReject,r=e.onResolve;t.useEffect(function(){var x=new URL(window.location.href),R=x.searchParams.get("code"),z=x.searchParams.get("state");z!=null&&z.includes("_microsoft")&&R&&(localStorage.setItem("microsoft",R),window.close())},[]);var v=t.useCallback(function(x){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+x.access_token}}).then(function(R){return R.json()}).then(function(R){r({provider:"microsoft",data:F({},R,x)})}).catch(function(R){o(R)})},[o,r]),h=t.useCallback(function(x){if(y)r({provider:"microsoft",data:{code:x}});else{var R={code:x,scope:_,client_id:b,redirect_uri:k,code_verifier:u,grant_type:"authorization_code"},z=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+a+"/oauth2/v2.0/token",{method:"POST",headers:z,body:new URLSearchParams(R)}).then(function(A){return A.json()}).then(function(A){A.access_token?i?r({provider:"microsoft",data:A}):v(A):o("no data")}).catch(function(A){o(A)})}},[_,a,o,v,b,r,k,u,y,i]),S=t.useCallback(function(x){var R=x.type,z=x.code,A=x.provider;try{return Promise.resolve(R==="code"&&A==="microsoft"&&z&&h(z))}catch(B){return Promise.reject(B)}},[h]),H=t.useCallback(function(){window.removeEventListener("storage",H,!1);var x=localStorage.getItem("microsoft");x&&(S({provider:"microsoft",type:"code",code:x}),localStorage.removeItem("microsoft"))},[S]),q=t.useCallback(function(){n&&n(),window.addEventListener("storage",H,!1);var x=window.screen.width/2-225,R=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+a+"/oauth2/v2.0/authorize?client_id="+b+`
        &response_type=`+N+`
        &redirect_uri=`+k+`
        &response_mode=`+P+`
        &scope=`+_+`
        &state=`+w+`_microsoft
        &prompt=`+T+`
        &code_challenge=`+u+`
        &code_challenge_method=`+m,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+R+", left="+x)},[_,w,T,a,b,n,k,P,N,u,H,m]);return V.createElement("div",{className:g,onClick:q},C)});t.memo(function(e){var l=e.state,a=l===void 0?"":l,f=e.scope,w=f===void 0?"r_liteprofile":f,b=e.client_id,g=e.client_secret,k=e.className,I=k===void 0?"":k,_=e.redirect_uri,L=e.response_type,N=L===void 0?"code":L,E=e.isOnlyGetCode,P=E!==void 0&&E,C=e.isOnlyGetToken,s=C!==void 0&&C,u=e.children,c=e.onLoginStart,m=e.onReject,p=e.onResolve;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_linkedin")&&o&&(localStorage.setItem("linkedin",o),window.close())},[]);var T=t.useCallback(function(n){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+n.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(o){return o.json()}).then(function(o){var r=F({},n);if(o.contents){var v=JSON.parse(o.contents);typeof n=="object"&&Object.entries(v).map(function(h){r[h[0]]=h[1]})}p({provider:"linkedin",data:r})}).catch(function(o){m(o)})},[m,p]),j=t.useCallback(function(n){if(P)p({provider:"linkedin",data:{code:n}});else{var o={code:n,grant_type:"authorization_code",redirect_uri:_,client_id:b,client_secret:g},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(v){return v.json()}).then(function(v){s?p({provider:"linkedin",data:v}):T(v)}).catch(function(v){m(v)})}},[m,p,b,T,_,g,P,s]),y=t.useCallback(function(n){var o=n.type,r=n.code,v=n.provider;try{return Promise.resolve(o==="code"&&v==="linkedin"&&r&&j(r))}catch(h){return Promise.reject(h)}},[j]),d=t.useCallback(function(){window.removeEventListener("storage",d,!1);var n=localStorage.getItem("linkedin");n&&(y({provider:"linkedin",type:"code",code:n}),localStorage.removeItem("linkedin"))},[y]),i=t.useCallback(function(){c&&c(),window.addEventListener("storage",d,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+N+"&client_id="+b+"&scope="+w+"&state="+a+"_linkedin&redirect_uri="+_,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[c,d,N,b,w,a,_]);return V.createElement("div",{className:I,onClick:i},u)});t.memo(function(e){var l=e.state,a=l===void 0?"":l,f=e.scope,w=f===void 0?"boards:read,pins:read,user_accounts:read":f,b=e.client_id,g=e.client_secret,k=e.className,I=k===void 0?"":k,_=e.redirect_uri,L=e.isOnlyGetCode,N=L!==void 0&&L,E=e.isOnlyGetToken,P=E!==void 0&&E,C=e.children,s=e.onLoginStart,u=e.onReject,c=e.onResolve;t.useEffect(function(){var d=new URL(window.location.href),i=d.searchParams.get("code"),n=d.searchParams.get("state");n!=null&&n.includes("_pinterest")&&i&&(localStorage.setItem("pinterest",i),window.close())},[]);var m=t.useCallback(function(d){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+d.access_token,"x-cors-grida-api-key":M}}).then(function(i){return i.json()}).then(function(i){c({provider:"pinterest",data:F({},d,i)})}).catch(function(i){return u(i)})},[u,c]),p=t.useCallback(function(d){try{var i=function(){if(!N){var n={code:d,redirect_uri:_,grant_type:"authorization_code"},o=[];for(var r in n){var v=encodeURIComponent(r),h=encodeURIComponent(n[r]);o.push(v+"="+h)}return o=o.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(b+":"+g),"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M},body:o}).then(function(S){return S.json()}).catch(function(S){return u(S)})).then(function(S){S.access_token&&(P?c({provider:"pinterest",data:S}):m(S))})}c({provider:"pinterest",data:{code:d}})}();return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},[u,b,m,c,_,g,N,P]),T=t.useCallback(function(d){var i=d.type,n=d.code,o=d.provider;try{return Promise.resolve(i==="code"&&o==="pinterest"&&n&&p(n))}catch(r){return Promise.reject(r)}},[p]),j=t.useCallback(function(){window.removeEventListener("storage",j,!1);var d=localStorage.getItem("pinterest");d&&(T({provider:"pinterest",type:"code",code:d}),localStorage.removeItem("pinterest"))},[T]),y=t.useCallback(function(){s&&s(),window.addEventListener("storage",j,!1);var d=window.screen.width/2-225,i=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+b+"&scope="+w+"&state="+a+"_pinterest&redirect_uri="+_+"&response_type=code","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+i+", left="+d)},[w,a,b,_,s,j]);return V.createElement("div",{className:I,onClick:y},C)});t.memo(function(e){var l=e.client_id,a=e.className,f=a===void 0?"":a,w=e.redirect_uri,b=e.children,g=e.fields,k=g===void 0?"created_at,description,entities,id,location,name,pinned_tweet_id,profile_image_url,protected,public_metrics,url,username,verified,withheld":g,I=e.state,_=I===void 0?"state":I,L=e.scope,N=L===void 0?"users.read%20tweet.read":L,E=e.isOnlyGetCode,P=E!==void 0&&E,C=e.isOnlyGetToken,s=C!==void 0&&C,u=e.onLoginStart,c=e.onReject,m=e.onResolve;t.useEffect(function(){var i=new URL(window.location.href),n=i.searchParams.get("code");i.searchParams.get("state")&&n&&(localStorage.setItem("twitter",""+n),window.close())},[]);var p=t.useCallback(function(i){fetch("https://cors.bridged.cc/https://api.twitter.com/2/users/me?user.fields="+k,{method:"GET",headers:{Authorization:"Bearer "+i.access_token,"x-cors-grida-api-key":M}}).then(function(n){return n.json()}).then(function(n){m({provider:"twitter",data:F({},i,n.data)})}).catch(function(n){return c(n)})},[k,c,m]),T=t.useCallback(function(i){try{var n=function(){if(!P){var o=new URLSearchParams({code:i,redirect_uri:w,client_id:l,grant_type:"authorization_code",code_verifier:"challenge"});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/2/oauth2/token",{method:"POST",body:o,headers:{"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M}}).then(function(r){return r.json()}).catch(function(r){return c(r)})).then(function(r){r.access_token&&(s?m({provider:"twitter",data:r}):p(r))})}m({provider:"twitter",data:{code:i}})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(o){return Promise.reject(o)}},[c,p,m,l,w,P,s]),j=t.useCallback(function(i){var n=i.type,o=i.code,r=i.provider;try{return Promise.resolve(n==="code"&&r==="twitter"&&o&&T(o))}catch(v){return Promise.reject(v)}},[T]),y=t.useCallback(function(){window.removeEventListener("storage",y,!1);var i=localStorage.getItem("twitter");i&&(j({provider:"twitter",type:"code",code:i}),localStorage.removeItem("twitter"))},[j]),d=t.useCallback(function(){try{u&&u(),window.addEventListener("storage",y,!1);var i=window.screen.width/2-225,n=window.screen.height/2-365;return window.open("https://twitter.com/i/oauth2/authorize?response_type=code&client_id="+l+"&redirect_uri="+w+"&scope="+N+"&state="+_+"&code_challenge=challenge&code_challenge_method=plain","twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+n+", left="+i),Promise.resolve()}catch(o){return Promise.reject(o)}},[N,_,l,u,w,y]);return V.createElement("div",{className:f,onClick:d},b)});typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var ce=window;t.memo(function(e){var l=e.client_id,a=e.scope,f=a===void 0?"name email":a,w=e.className,b=w===void 0?"":w,g=e.onLoginStart,k=e.onReject,I=e.onResolve,_=e.redirect_uri,L=_===void 0?"/":_,N=e.children,E=t.useRef(null),P=t.useState(!1),C=P[0],s=P[1];t.useEffect(function(){!C&&p()},[C]),t.useEffect(function(){return function(){E.current&&E.current.remove()}},[]);var u=t.useCallback(function(){return!!document.getElementById("apple-login")},[]),c=t.useCallback(function(j,y,d,i,n){y===void 0&&(y="script");var o=j.createElement(y);o.id=d,o.src=i,o.async=!0,o.defer=!0;var r=document.getElementsByTagName("script")[0];E.current=o,r&&r.parentNode&&r.parentNode.insertBefore(o,r),o.onload=n},[]),m=t.useCallback(function(j){I({provider:"apple",data:j})},[I]),p=t.useCallback(function(){u()?s(!0):c(document,"script","apple-login","https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",function(){ce.AppleID.auth.init({clientId:l,scope:f,redirectURI:L,state:"origin:web",usePopup:!0}),s(!0)})},[f,l,L,c,u]),T=t.useCallback(function(){try{if(!C)return Promise.resolve();var j=function(){if(ce.AppleID){g&&g();var y=function(d,i){try{var n=Promise.resolve(ce.AppleID.auth.signIn()).then(function(o){m(o)})}catch(o){return i(o)}return n&&n.then?n.then(void 0,i):n}(0,function(d){k({err:d})});if(y&&y.then)return y.then(function(){})}else p(),k("Apple SDK isn't loaded!")}();return Promise.resolve(j&&j.then?j.then(function(){}):void 0)}catch(y){return Promise.reject(y)}},[m,C,p,g,k]);return V.createElement("div",{className:b,onClick:T},N)});t.memo(function(e){var l=e.state,a=l===void 0?"":l,f=e.scope,w=f===void 0?"user.info.basic":f,b=e.client_key,g=e.className,k=g===void 0?"":g,I=e.redirect_uri,_=e.children,L=e.onResolve,N=e.onLoginStart;t.useEffect(function(){var s=new URL(window.location.href),u=s.searchParams.get("code"),c=s.searchParams.get("state");c!=null&&c.includes("_tiktok")&&u&&(localStorage.setItem("tiktok",u),window.close())},[]);var E=t.useCallback(function(s){var u=s.type,c=s.code,m=s.provider;try{return Promise.resolve(u==="code"&&m==="tiktok"&&c&&L({provider:"tiktok",data:{code:c}}))}catch(p){return Promise.reject(p)}},[L]),P=t.useCallback(function(){window.removeEventListener("storage",P,!1);var s=localStorage.getItem("tiktok");s&&(E({provider:"tiktok",type:"code",code:s}),localStorage.removeItem("instagram"))},[E]),C=t.useCallback(function(){N&&N(),window.addEventListener("storage",P,!1);var s=window.screen.width/2-225,u=window.screen.height/2-365;window.open("https://www.tiktok.com/auth/authorize?client_key="+b+"&scope="+w+"&state="+a+"_tiktok&redirect_uri="+I+"&response_type=code","Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+u+", left="+s)},[w,a,b,I,N,P]);return V.createElement("div",{className:k,onClick:C},_)});const ye=()=>{const e=ue(),[l,a]=t.useState("");(async()=>{try{const k=await(await he.get("http://localhost:3500/CreateUserData")).data;a(k[0].number)}catch{a(void 0)}})();const w=fe({initialValues:{Text:""},validationSchema:ve({Text:ge().required("This field is required")}),onSubmit:g=>{l===g.Text?e("/"):se.warning("You do not have a account,First create Your Account!")}}),b=()=>{se.success(`Hello! This is a small verification from the ${Provider} team`),setTimeout(()=>{e("/")},2e3)};return O.jsxs("div",{className:"bg-dark text-white",style:{height:"100vh"},children:[O.jsxs("div",{className:"icon d-flex justify-content-center",children:[O.jsx("img",{src:pe,alt:"",className:"rounded-5 mt-5 m-1",width:"40",height:"35"}),O.jsx("h4",{className:"d-flex align-items-center mt-5",children:"WalkAura"})]}),O.jsx("div",{className:"container-fluid d-flex flex-column mt-1 align-items-center",children:O.jsxs("div",{className:"row card border-1",style:{width:"350px",padding:"16px"},children:[O.jsxs("form",{action:"",onSubmit:w.handleSubmit,children:[O.jsx("h2",{children:"Sign in"}),O.jsx("b",{children:"Enter email"}),O.jsx("br",{}),O.jsx("input",{type:"text",className:"form-control mt-2 border-3 mb-1",name:"Text",onChange:w.handleChange}),w.errors.Text&&w.touched.Text&&O.jsx("span",{className:"text-danger fw-bold ",children:w.errors.Text}),O.jsx("br",{}),O.jsx("button",{className:"btn btn-dark w-100 mt-2 mb-2",type:"submit",children:"Continue"}),O.jsx("br",{})]}),O.jsxs("span",{children:["By continuing, you agree to Amazon's ",O.jsx("a",{href:"#",children:"Conditions of Use"})," and Privacy Notice."]}),O.jsx("p",{className:"mt-1 text-center",children:"if New to WalkAura?"}),O.jsx("section",{className:" text-center",children:O.jsx(me,{to:"/CreateAccount",children:O.jsx("button",{className:"row btn-dark btn w-100",children:"Create your Aura account"})})}),O.jsx("b",{className:"text-center mt-2 mb-2",children:"---------- or ----------"}),O.jsx(we,{client_id:"172331589830-a12ogcv19gajaht2v6gs8nsi0p7ohrbq.apps.googleusercontent.com",access_type:"online",onSuccess:b,onReject:g=>{console.error("Login failed:",g)},children:O.jsxs("button",{className:"btn btn-dark d-flex justify-content-center align-items-center w-100",children:["Sign in with Google",O.jsx("i",{className:"bi bi-google text-danger fw-bold fs-4 ms-2"})]})})]})})]})};export{ye as default};
